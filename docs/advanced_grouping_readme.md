# –£–ª—É—á—à–µ–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ v2.0.0

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–µ–π —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—à–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–π –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏.

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏

### 1. –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `INNER JOIN` —Å —Ç–∞–±–ª–∏—Ü–µ–π –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏—Å–∫–ª—é—á–∞–ª–æ —Ç–æ–≤–∞—Ä—ã –±–µ–∑ –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏–∑ –ø–æ–∏—Å–∫–∞ –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–∞ –Ω–∞ `LEFT JOIN` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤

### 2. –ñ–∞–¥–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ì–ª–æ–±–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä `used_wb_skus` –ø—Ä–∏–≤–æ–¥–∏–ª –∫ –∑–∞—Ö–≤–∞—Ç—É –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤ –ø–µ—Ä–≤—ã–º–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏
- **–†–µ—à–µ–Ω–∏–µ**: –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø—É–ª—ã –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏/–ø–æ–ª–∞ —Å —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–∏—Å–∫–∞ –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

### 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- **–ü—Ä–æ–±–ª–µ–º–∞**: –¢–µ—Å–Ω–∞—è —Å–≤—è–∑—å UI –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- **–†–µ—à–µ–Ω–∏–µ**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ú–æ–¥—É–ª–∏

1. **`utils/advanced_product_grouper.py`** - –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
   - `GroupingConfig` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
   - `GroupingResult` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
   - `AdvancedProductGrouper` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤—â–∏–∫–∞

2. **`utils/advanced_grouping_ui_components.py`** - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - –§—É–Ω–∫—Ü–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
   - –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

3. **`pages/11_üéØ_–£–ª—É—á—à–µ–Ω–Ω–∞—è_–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞_–¢–æ–≤–∞—Ä–æ–≤.py`** - Streamlit —Å—Ç—Ä–∞–Ω–∏—Ü–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UI –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

## –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

```sql
-- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
SELECT p.wb_sku, p.avg_rating
FROM punta_data p
INNER JOIN stock_summary s ON p.wb_sku = s.wb_sku  -- –ò—Å–∫–ª—é—á–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã –±–µ–∑ –æ—Å—Ç–∞—Ç–∫–æ–≤!

-- –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
SELECT p.wb_sku, p.avg_rating, COALESCE(s.total_stock, 0) as total_stock
FROM punta_data p
LEFT JOIN stock_summary s ON p.wb_sku = s.wb_sku  -- –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
```

### 2. –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤

```python
# –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (–ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ)
used_wb_skus = set()  # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä

# –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ)
compensator_pools = {
    ('–ñ–µ–Ω—Å–∫–∏–π', '–û–¥–µ–∂–¥–∞'): [sku1, sku2, ...],
    ('–ú—É–∂—Å–∫–æ–π', '–û–±—É–≤—å'): [sku3, sku4, ...]
}
```

### 3. –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
logs = [
    "[INFO] –ù–∞—á–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä—É–ø–ø—ã: gender=–ñ–µ–Ω—Å–∫–∏–π, category=–û–¥–µ–∂–¥–∞",
    "[INFO] –ù–∞–π–¥–µ–Ω–æ 5 –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤ –≤ –ø—É–ª–µ",
    "[WARNING] –ì—Ä—É–ø–ø–∞ —Ç—Ä–µ–±—É–µ—Ç 2 –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–∞, –¥–æ—Å—Ç—É–ø–Ω–æ 1",
    "[ERROR] –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä—ã"
]
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```python
from utils.advanced_product_grouper import AdvancedProductGrouper, GroupingConfig
from utils.db_connection import connect_db

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞
config = GroupingConfig(
    grouping_columns=['gender', 'wb_category'],
    min_group_rating=4.0,
    max_wb_sku_per_group=10
)

# –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤—â–∏–∫–∞
conn = connect_db()
grouper = AdvancedProductGrouper(conn)

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
wb_skus = ['12345', '67890', '11111']
result = grouper.create_advanced_product_groups(wb_skus, config)

# –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
print(f"–°–æ–∑–¥–∞–Ω–æ –≥—Ä—É–ø–ø: {result.statistics['total_groups']}")
for group in result.groups:
    print(f"–ì—Ä—É–ø–ø–∞ {group['group_id']}: {group['item_count']} —Ç–æ–≤–∞—Ä–æ–≤")
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

```python
config = GroupingConfig(
    grouping_columns=['gender', 'wb_category', 'brand'],  # –ö–æ–ª–æ–Ω–∫–∏ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
    min_group_rating=4.2,                                # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –≥—Ä—É–ø–ø—ã
    max_wb_sku_per_group=15,                             # –ú–∞–∫—Å–∏–º—É–º SKU –≤ –≥—Ä—É–ø–ø–µ
    enable_sort_priority=True,                           # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    wb_category='–û–¥–µ–∂–¥–∞'                                 # –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
)
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```python
result = GroupingResult(
    groups=[
        {
            'group_id': 'group_1',
            'group_rating': 4.3,
            'item_count': 8,
            'items': [
                {'wb_sku': '12345', 'avg_rating': 4.1, 'total_stock': 100},
                {'wb_sku': '67890', 'avg_rating': 4.5, 'total_stock': 50}
            ]
        }
    ],
    statistics={
        'total_groups': 5,
        'total_items_processed': 42,
        'avg_group_size': 8.4,
        'avg_group_rating': 4.2
    },
    logs=[
        "[INFO] –ù–∞—á–∞—Ç–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ 42 —Ç–æ–≤–∞—Ä–æ–≤",
        "[INFO] –°–æ–∑–¥–∞–Ω–æ 5 –≥—Ä—É–ø–ø"
    ],
    low_rating_items=[],
    defective_items=[]
)
```

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö Punta –ø–æ WB SKU
2. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
3. –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
4. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞)

### 2. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
1. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ª—é `sort` (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –∫–æ–ª–æ–Ω–∫–∞–º
3. –†–∞—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø—É–ª–æ–≤ –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤
1. –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º (>= min_group_rating)
2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏/–ø–æ–ª—É
3. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤ –±–µ–∑ –æ—Å—Ç–∞—Ç–∫–æ–≤

### 4. –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –≥—Ä—É–ø–ø
1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø, —Ç—Ä–µ–±—É—é—â–∏—Ö –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏
2. –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤ –≤ –≥—Ä—É–ø–ø—ã
4. –ü–µ—Ä–µ—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –≥—Ä—É–ø–ø

### 5. –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –≥—Ä—É–ø–ø
2. –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
3. –†–∞—Å—á–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π

| –ê—Å–ø–µ–∫—Ç | –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è | –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è |
|--------|-------------------|------------------|
| SQL –∑–∞–ø—Ä–æ—Å—ã | INNER JOIN (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ) | LEFT JOIN (–ø—Ä–∞–≤–∏–ª—å–Ω–æ) |
| –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤ | –ñ–∞–¥–Ω–æ–µ (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä) | –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ (–ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—É–ª—ã) |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | –î–µ—Ç–∞–ª—å–Ω–æ–µ |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è | –ú–æ–¥—É–ª—å–Ω–∞—è |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è |
| –û—Ç–ª–∞–¥–∫–∞ | –°–ª–æ–∂–Ω–∞—è | –ü—Ä–æ—Å—Ç–∞—è |
| –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è |

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
1. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö JOIN
2. **–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **–õ–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** - —Ä–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é
- –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö (>10000 SKU) —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ –∫–æ–ª–æ–Ω–∫–∞—Ö `wb_sku`, `gender`, `wb_category`
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –≥—Ä—É–ø–ø–∞–º–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
```python
def test_grouping_basic():
    """–¢–µ—Å—Ç –±–∞–∑–æ–≤–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏."""
    config = GroupingConfig(
        grouping_columns=['gender'],
        min_group_rating=4.0
    )
    grouper = AdvancedProductGrouper(mock_conn)
    result = grouper.create_advanced_product_groups(['sku1', 'sku2'], config)
    
    assert len(result.groups) > 0
    assert result.statistics['total_groups'] > 0

def test_compensator_distribution():
    """–¢–µ—Å—Ç —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤."""
    # –¢–µ—Å—Ç –ª–æ–≥–∏–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
    pass
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```python
def test_full_pipeline():
    """–¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏."""
    # –¢–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
    pass
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —É—Ä–æ–≤–Ω—è –≤–∞–∂–Ω–æ—Å—Ç–∏:
- `[INFO]` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `[WARNING]` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `[ERROR]` - –æ—à–∏–±–∫–∏

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø
- –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã
- –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –≥—Ä—É–ø–ø
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

## –†–∞–∑–≤–∏—Ç–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è
1. **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
2. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. **API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–µ–∑ UI

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–∞—Ö –¥–∞–Ω–Ω—ã—Ö (>50000 SKU)
2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö Punta –∏ –æ—Å—Ç–∞—Ç–∫–æ–≤
3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏

### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ–∫—É—â–µ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –Ω–∞–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö
4. –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
5. –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–π —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –∏–∑-–∑–∞:
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ù–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –î—Ä—É–≥–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –ª–æ–≥–æ–≤

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Ä–µ—à–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–π, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª. –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–ª–µ–≥—á–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Ç–ª–∞–¥–∫—É –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ —Å–∏—Å—Ç–µ–º—ã.
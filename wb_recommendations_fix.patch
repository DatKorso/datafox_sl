--- a/utils/wb_recommendations.py
+++ b/utils/wb_recommendations.py
@@ -522,6 +522,7 @@ class WBDataCollector:
     def _get_ozon_characteristics(self, oz_vendor_codes: List[str]) -> List[Dict[str, Any]]:
         """ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº Ğ¸Ğ· Ozon Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ¿Ğ¾ vendor_code"""
         if not oz_vendor_codes:
+            logger.info("ğŸ” _get_ozon_characteristics: ĞŸÑƒÑÑ‚Ğ¾Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº vendor_codes")
             return []
         
         try:
@@ -538,9 +539,12 @@ class WBDataCollector:
                 ocp.color,
                 ocp.fastener_type
             FROM oz_category_products ocp
             WHERE ocp.oz_vendor_code IN ({placeholders})
-            AND ocp.type IS NOT NULL
-            AND ocp.gender IS NOT NULL
-            AND ocp.oz_brand IS NOT NULL
+            """
+            # Ğ£Ğ‘Ğ˜Ğ ĞĞ•Ğœ Ğ–Ğ•Ğ¡Ğ¢ĞšĞ˜Ğ• Ğ¤Ğ˜Ğ›Ğ¬Ğ¢Ğ Ğ« - Ğ¾Ğ½Ğ¸ Ğ¸ÑĞºĞ»ÑÑ‡Ğ°ÑÑ‚ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹
+            # Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ ĞºĞ¾Ğ´:
+            # AND ocp.type IS NOT NULL
+            # AND ocp.gender IS NOT NULL  
+            # AND ocp.oz_brand IS NOT NULL
             """
             
             results_df = self.db_conn.execute(query, oz_vendor_codes).fetchdf()
@@ -548,6 +552,12 @@ class WBDataCollector:
             if results_df.empty:
+                logger.warning(f"âš ï¸ ĞĞµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº Ğ² oz_category_products Ğ´Ğ»Ñ {len(oz_vendor_codes)} vendor_codes")
+                logger.info(f"ğŸ“Š Vendor codes: {oz_vendor_codes[:5]}...")  # ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ 5
                 return []
+            
+            results = results_df.to_dict('records')
+            complete_count = sum(1 for r in results if r.get('type') and r.get('gender') and r.get('oz_brand'))
+            logger.info(f"âœ… ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ {len(results)} Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹ (Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ñ…: {complete_count})")
             
-            return results_df.to_dict('records')
+            return results
         
         except Exception as e:
             logger.error(f"âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ozon Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº: {e}")
@@ -559,6 +569,7 @@ class WBDataCollector:
             return product_info
         
         try:
+            logger.info(f"ğŸ” ĞĞ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Punta Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ»Ñ WB {product_info.wb_sku}")
             query = """
             SELECT 
                 material_short,
@@ -579,6 +590,7 @@ class WBDataCollector:
             result = self.db_conn.execute(query, [product_info.wb_sku, product_info.wb_brand]).fetchone()
             
             if result:
+                logger.info(f"âœ… ĞĞ°Ğ¹Ğ´ĞµĞ½Ñ‹ Punta Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ WB {product_info.wb_sku}")
                 product_info.punta_material_short = result[0]
                 product_info.punta_new_last = result[1]
                 product_info.punta_mega_last = result[2]
@@ -588,6 +600,8 @@ class WBDataCollector:
                 product_info.punta_heel_up_type = result[6]
                 product_info.punta_lacing_type = result[7]
                 product_info.punta_nose_type = result[8]
+            else:
+                logger.info(f"âš ï¸ Punta Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ñ‹ Ğ´Ğ»Ñ WB {product_info.wb_sku}")
             
             return product_info
             
@@ -985,8 +999,27 @@ class WBRecommendationEngine:
                 return []
             
             # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ¸Ñ
-            if not source_product.has_enriched_data():
-                logger.warning(f"âš ï¸ WB Ñ‚Ğ¾Ğ²Ğ°Ñ€ {wb_sku} Ğ½Ğµ Ğ¸Ğ¼ĞµĞµÑ‚ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ñ… Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¹")
+            enrichment_quality = source_product.get_enrichment_score()
+            logger.info(f"ğŸ“Š ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ¸Ñ: {enrichment_quality:.2f}")
+            
+            if not source_product.has_enriched_data():
+                logger.warning(f"âš ï¸ WB Ñ‚Ğ¾Ğ²Ğ°Ñ€ {wb_sku} Ğ½Ğµ Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ñ… Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…")
+                logger.info(f"ğŸ“Š Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ¸Ñ:")
+                logger.info(f"   enriched_type: {source_product.enriched_type}")
+                logger.info(f"   enriched_gender: {source_product.enriched_gender}")
+                logger.info(f"   enriched_brand: {source_product.enriched_brand}")
+                logger.info(f"   linked_oz_skus: {len(source_product.linked_oz_skus or [])}")
+                
+                # ĞĞĞ’Ğ«Ğ™ FALLBACK ĞĞ›Ğ“ĞĞ Ğ˜Ğ¢Ğœ: Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¼ WB Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ°Ğ¼
+                logger.info(f"ğŸ”„ ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµĞ¼ fallback Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¼ WB Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ°Ğ¼...")
+                fallback_recommendations = self._find_recommendations_by_wb_characteristics(source_product)
+                
+                if fallback_recommendations:
+                    logger.info(f"âœ… Fallback Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ½Ğ°ÑˆĞµĞ» {len(fallback_recommendations)} Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¹")
+                    return fallback_recommendations
+                else:
+                    logger.warning(f"âŒ Fallback Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ½Ğµ Ğ½Ğ°ÑˆĞµĞ» Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¹")
                 return []
             
             logger.info(f"ğŸ“Š Ğ¢Ğ¾Ğ²Ğ°Ñ€ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ - Ñ‚Ğ¸Ğ¿: {source_product.get_effective_type()}, Ğ¿Ğ¾Ğ»: {source_product.get_effective_gender()}, Ğ±Ñ€ĞµĞ½Ğ´: {source_product.get_effective_brand()}")
@@ -1082,6 +1115,64 @@ class WBRecommendationEngine:
         except Exception as e:
             logger.error(f"âŒ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ¸ÑĞºĞµ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ´Ğ»Ñ WB {wb_sku}: {e}")
             return []
+    
+    def _find_recommendations_by_wb_characteristics(self, source_product: WBProductInfo) -> List[WBRecommendation]:
+        """
+        FALLBACK Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¹ Ğ¿Ğ¾ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¼ WB Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ°Ğ¼
+        ĞšĞ¾Ğ³Ğ´Ğ° Ğ½ĞµÑ‚ Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸Ğ· Ozon
+        """
+        logger.info(f"ğŸ”„ FALLBACK: ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¼ WB Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ°Ğ¼ Ğ´Ğ»Ñ {source_product.wb_sku}")
+        
+        try:
+            # ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ¿Ğ¾ Ğ±Ñ€ĞµĞ½Ğ´Ñƒ Ğ¸ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ WB
+            query = """
+            SELECT DISTINCT wb.wb_sku
+            FROM wb_products wb
+            LEFT JOIN wb_prices wp ON wb.wb_sku = wp.wb_sku
+            WHERE wb.wb_brand = ?
+            AND wb.wb_category = ?
+            AND wb.wb_sku != ?
+            AND COALESCE(wp.wb_fbo_stock, wb.wb_fbo_stock, 0) > 0
+            ORDER BY COALESCE(wp.wb_fbo_stock, wb.wb_fbo_stock, 0) DESC
+            LIMIT ?
+            """
+            
+            candidates_data = self.db_conn.execute(query, [
+                source_product.wb_brand,
+                source_product.wb_category, 
+                source_product.wb_sku,
+                self.config.max_recommendations * 2  # Ğ‘ĞµÑ€ĞµĞ¼ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ´Ğ»Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
+            ]).fetchall()
+            
+            logger.info(f"ğŸ“Š FALLBACK: ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ {len(candidates_data)} ĞºĞ°Ğ½Ğ´Ğ¸Ğ´Ğ°Ñ‚Ğ¾Ğ² Ğ¿Ğ¾ Ğ±Ñ€ĞµĞ½Ğ´Ñƒ+ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸")
+            
+            if not candidates_data:
+                return []
+            
+            # Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¼ scoring
+            recommendations = []
+            for candidate_row in candidates_data:
+                candidate_sku = str(candidate_row[0])
+                
+                # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ĞºĞ°Ğ½Ğ´Ğ¸Ğ´Ğ°Ñ‚Ğµ
+                candidate_info = self.data_collector.get_wb_product_info(candidate_sku)
+                if not candidate_info:
+                    continue
+                
+                # ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ scoring Ğ´Ğ»Ñ fallback
+                base_score = 50  # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ score Ğ´Ğ»Ñ fallback
+                
+                # Ğ‘Ğ¾Ğ½ÑƒÑ Ğ·Ğ° ÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ½Ğ¾Ğ¹ ÑĞµÑ‚ĞºĞ¸
+                if (source_product.wb_sizes and candidate_info.wb_sizes and 
+                    set(source_product.wb_sizes) & set(candidate_info.wb_sizes)):
+                    base_score += 20
+                
+                recommendation = WBRecommendation(
+                    product_info=candidate_info,
+                    score=base_score,
+                    match_details=f"Fallback Ğ¿Ğ¾Ğ¸ÑĞº: Ñ‚Ğ¾Ñ‚ Ğ¶Ğµ Ğ±Ñ€ĞµĞ½Ğ´ ({source_product.wb_brand}) Ğ¸ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ ({source_product.wb_category})"
+                )
+                recommendations.append(recommendation)
+            
+            # ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¸ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼
+            recommendations.sort(key=lambda r: r.score, reverse=True)
+            final_recommendations = recommendations[:self.config.max_recommendations]
+            
+            logger.info(f"âœ… FALLBACK: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¾ {len(final_recommendations)} Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¹")
+            return final_recommendations
+            
+        except Exception as e:
+            logger.error(f"âŒ ĞÑˆĞ¸Ğ±ĞºĞ° FALLBACK Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ°: {e}")
+            return []
 
     def calculate_similarity_score(self, source: WBProductInfo, candidate: WBProductInfo) -> float: